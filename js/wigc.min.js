function snap(e,t){for(var n=e.length-1;n>=0&&(e[n]!==t||(e.splice(n,1),!0!==multi));n--);}function trackEvent(e,t,n,o){o?console.log("CATEGORY: "+e+", ACTION:"+t+", LABEL:"+n+", VALUE:"+o):n?console.log("CATEGORY: "+e+", ACTION:"+t+", LABEL:"+n):console.log("CATEGORY: "+e+", ACTION:"+t)}var app=new Vue({el:"#app",data:{my:{sidebarVisible:!0,meetoo:"",view:"home",sessions:[],vendors:[]},home:{},sessions:[],vendors:[],people:[],unfavorited:[],showMyVendors:!0,error_msg:!1},computed:{mySessions:function(){var e=this;return e.sessions.filter(function(t){if(-1!==e.my.sessions.indexOf(t.url)||-1!==e.unfavorited.indexOf(t.url)||"schedule-item"===t.type)return!0})},myVendors:function(){var e=this;return e.vendors.filter(function(t){if(-1!==e.my.vendors.indexOf(t.url)||-1!==e.unfavorited.indexOf(t.url)||!1===e.showMyVendors)return!0})}},mounted:function(){var e=this;$.ajax({url:"https://circle.red/wigc/",method:"GET",success:function(t){e.home=t},error:function(e){alert(JSON.stringify(e))}}),$.ajax({url:"https://circle.red/wigc/events",method:"GET",success:function(t){e.sessions=t},error:function(e){alert(JSON.stringify(e))}}),$.ajax({url:"https://circle.red/wigc/vendors",method:"GET",success:function(t){e.vendors=t},error:function(e){alert(JSON.stringify(e))}}),$.ajax({url:"https://circle.red/wigc/people",method:"GET",success:function(t){e.people=t},error:function(e){alert(JSON.stringify(e))}});var t=indexedDB.open("WIGCApp",3);t.onerror=function(t){e.indexed="Can't use IndexedDB"},t.onsuccess=function(t){e.db=this.result,e.getFavorites(),e.my.view="sessions"},t.onupgradeneeded=function(e){e.currentTarget.result.createObjectStore("my")},document.addEventListener("deviceready",function(){window.plugins.OneSignal.setLogLevel({logLevel:4,visualLevel:4}),console.log("Device Ready!");window.plugins.OneSignal.startInit("2405a721-a178-45fb-a787-a1bf43a2e74c").handleNotificationOpened(function(e){console.log("notificationOpenedCallback: "+JSON.stringify(e))}).endInit()},!1)},updated:function(){var e=this,t=indexedDB.open("WIGCApp",3);t.onerror=function(t){e.indexed="Can't use IndexedDB"},t.onsuccess=function(t){e.db=this.result,e.updateFavorites()},t.onupgradeneeded=function(e){e.currentTarget.result.createObjectStore("my")}},methods:{toggleFavorite:function(e,t){var n=this;t.favorite=!t.favorite,console.log(t.url),t.favorite?e.push(t.url):(("my-wigc"===n.my.view||"vendors"===n.my.view&&!0===n.showMyVendors)&&(n.unfavorited.push(t.url),setTimeout(function(){snap(n.unfavorited,t.url)},3e3)),snap(e,t.url))},switchSection:function(e){var t=this;t.my.sidebarVisible=!1,"my-wigc"===t.my.view&&(t.unfavorited=[]),"map"==t.my.view&&onLoad(),t.my.view=e,trackEvent("Screen",t.my.view)},mapClick:function(e){var t=e.street_address+" "+e.city+", "+e.state+" "+e.zip;window.open("https://maps.google.com?q="+t,"Map"),console.log(e)},showMeetoo:function(e){var t=this;t.my.meetoo=e,t.switchSection("meetoo")},getFavorites:function(){var e=this;e.getObjectStore("my","readonly").openCursor().onsuccess=function(t){var n=t.target.result;n&&(e.my=n.value,e.my.view="home")}},updateFavorites:function(){var e=this,t=e.getObjectStore("my","readwrite");t.count().onsuccess=function(n){if(0===n.target.result)try{t.add(e.my,0)}catch(e){throw e}else t.openCursor().onsuccess=function(t){var n=t.target.result;if(n)try{n.update(e.my)}catch(e){throw e}e.sessions.map(function(t){-1!==e.my.sessions.indexOf(t.url)&&(t.favorite=!0)}),e.vendors.map(function(t){-1!==e.my.vendors.indexOf(t.url)&&(t.favorite=!0)})}}},getObjectStore:function(e,t){return this.db.transaction(e,t).objectStore(e)},isDisabled:function(e){return!e.favorite&&"schedule-item"!==e.type}}});
//# sourceMappingURL=wigc.min.js.map