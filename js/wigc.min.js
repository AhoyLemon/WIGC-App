function snap(e,n){for(var t=e.length-1;t>=0&&(e[t]!==n||(e.splice(t,1),!0!==multi));t--);}function trackEvent(e,n,t,o){o?console.log("CATEGORY: "+e+", ACTION:"+n+", LABEL:"+t+", VALUE:"+o):t?console.log("CATEGORY: "+e+", ACTION:"+n+", LABEL:"+t):console.log("CATEGORY: "+e+", ACTION:"+n)}var app=new Vue({el:"#app",data:{my:{sidebarVisible:!0,meetoo:"",view:"home",sessions:[],vendors:[]},sessions:[],vendors:[],people:[],unfavorited:[],showMyVendors:!0,error_msg:!1},computed:{mySessions:function(){var e=this;return e.sessions.filter(function(n){if(-1!==e.my.sessions.indexOf(n.url)||-1!==e.unfavorited.indexOf(n.url)||"schedule-item"===n.type)return!0})},myVendors:function(){var e=this;return e.vendors.filter(function(n){if(-1!==e.my.vendors.indexOf(n.url)||-1!==e.unfavorited.indexOf(n.url)||!1===e.showMyVendors)return!0})}},mounted:function(){var e=this;$.ajax({url:"http://localhost/wigc/events",method:"GET",success:function(n){e.sessions=n},error:function(e){alert(JSON.stringify(e))}}),$.ajax({url:"https://circle.red/wigc/vendors",method:"GET",success:function(n){e.vendors=n},error:function(e){alert(JSON.stringify(e))}}),$.ajax({url:"https://circle.red/wigc/people",method:"GET",success:function(n){e.people=n},error:function(e){alert(JSON.stringify(e))}});var n=indexedDB.open("WIGCApp",3);n.onerror=function(n){e.indexed="Can't use IndexedDB"},n.onsuccess=function(n){e.db=this.result,e.getFavorites(),e.my.view="sessions"},n.onupgradeneeded=function(e){e.currentTarget.result.createObjectStore("my")},document.addEventListener("deviceready",function(){window.plugins.OneSignal.setLogLevel({logLevel:4,visualLevel:4}),console.log("Device Ready!");window.plugins.OneSignal.startInit("2405a721-a178-45fb-a787-a1bf43a2e74c").handleNotificationOpened(function(e){console.log("notificationOpenedCallback: "+JSON.stringify(e))}).endInit()},!1)},updated:function(){var e=this,n=indexedDB.open("WIGCApp",3);n.onerror=function(n){e.indexed="Can't use IndexedDB"},n.onsuccess=function(n){e.db=this.result,e.updateFavorites()},n.onupgradeneeded=function(e){e.currentTarget.result.createObjectStore("my")}},methods:{toggleFavorite:function(e,n){var t=this;n.favorite=!n.favorite,console.log(n.url),n.favorite?e.push(n.url):(("my-wigc"===t.my.view||"vendors"===t.my.view&&!0===t.showMyVendors)&&(t.unfavorited.push(n.url),setTimeout(function(){snap(t.unfavorited,n.url)},3e3)),snap(e,n.url))},switchSection:function(e){var n=this;n.my.sidebarVisible=!1,"my-wigc"===n.my.view&&(n.unfavorited=[]),"map"==n.my.view&&onLoad(),n.my.view=e,trackEvent("Screen",n.my.view)},mapClick:function(e){var n=e.street_address+" "+e.city+", "+e.state+" "+e.zip;window.open("https://maps.google.com?q="+n,"Map"),console.log(e)},showMeetoo:function(e){var n=this;n.my.meetoo=e,n.switchSection("meetoo")},getFavorites:function(){var e=this;e.getObjectStore("my","readonly").openCursor().onsuccess=function(n){var t=n.target.result;t&&(e.my=t.value)}},updateFavorites:function(){var e=this,n=e.getObjectStore("my","readwrite");n.count().onsuccess=function(t){if(0===t.target.result)try{n.add(e.my,0)}catch(e){throw e}else n.openCursor().onsuccess=function(n){var t=n.target.result;if(t)try{t.update(e.my)}catch(e){throw e}e.sessions.map(function(n){-1!==e.my.sessions.indexOf(n.url)&&(n.favorite=!0)}),e.vendors.map(function(n){-1!==e.my.vendors.indexOf(n.url)&&(n.favorite=!0)})}}},getObjectStore:function(e,n){return this.db.transaction(e,n).objectStore(e)},isDisabled:function(e){return!e.favorite&&"schedule-item"!==e.type}}});
//# sourceMappingURL=wigc.min.js.map