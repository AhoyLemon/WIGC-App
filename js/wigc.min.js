function snap(e,t){for(var n=e.length-1;0<=n&&(e[n]!==t||(e.splice(n,1),!0!==multi));n--);}function trackEvent(e,t,n,o){o?(_paq.push(["trackEvent",e,t,n,o]),console.log("CATEGORY: "+e+", ACTION:"+t+", LABEL:"+n+", VALUE:"+o)):n?(_paq.push(["trackEvent",e,t,n]),console.log("CATEGORY: "+e+", ACTION:"+t+", LABEL:"+n)):(_paq.push(["trackEvent",e,t]),console.log("CATEGORY: "+e+", ACTION:"+t))}var _paq=_paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),$(document).on("load",function(){var e="https://circle.red/stats/";_paq.push(["setTrackerUrl",e+"piwik.php"]),_paq.push(["setSiteId","2"]);var t=document,n=t.createElement("script"),o=t.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.src=e+"piwik.js",o.parentNode.insertBefore(n,o)});var app=new Vue({el:"#app",data:{my:{sidebarVisible:!1,meetoo:"",view:"loading",showMySessionsDesc:!0,sessions:[],vendors:[]},loaded:!1,home:{},sessions:[],vendors:[],people:[],sponsors:[],tracks:["Tribal Government","Casino Operations & Security","Regulation","Finance & Business Development","MCLE"],social:{},unfavorited:[],showMyVendors:!1,search:"",socialView:"twitter",instagramFeed:{},igLoading:!0,tweetsLoading:!0,tweets:{},contactUs:{},exhibitorInfo:{},booths:[],selectedTracks:[],showFilters:!1,error_msg:!1},computed:{mySessions:function(){var t=this;return t.sessions.filter(function(e){if(-1!==t.my.sessions.indexOf(e.url)||-1!==t.unfavorited.indexOf(e.url)||"schedule-item"===e.type)return!0})},conferenceSchedule:function(){return this.sessions.filter(function(e){if("schedule"===e.type)return!0})},seminars:function(){var t=this;return t.sessions.filter(function(e){if("sessions"===e.type&&(-1!==t.selectedTracks.indexOf(e.track)||0===t.selectedTracks.length))return!0})},filterIndicator:function(){var e=this;return 0===e.selectedTracks.length||e.selectedTracks.length===e.tracks.length?"All Sessions":e.selectedTracks.join(", ")},myVendors:function(){var t=this;return t.vendors.filter(function(e){if(-1!==t.my.vendors.indexOf(e.url)||-1!==t.unfavorited.indexOf(e.url)||!1===t.showMyVendors)return!0})},instagramLatest:function(){if(0<this.instagramFeed.length)return this.instagramFeed.slice(0,3)}},mounted:function(){var t=this;t.bindEvents(),$.ajax({url:"http://localhost/wigc/",method:"GET",success:function(e){t.home=e.home,t.sessions=e.sessions,t.people=e.people,t.vendors=e.vendors,t.sponsors=e.sponsors,t.social=e.social,t.contactUs=e.pages.contactus,t.exhibitorInfo=e.pages.exhibitorinformation,t.booths=e.booths,t.loaded=!0},error:function(e){t.error_msg=e.responseText,t.my.view="error"}});var e=indexedDB.open("WIGCApp",3);e.onerror=function(e){t.indexed="Can't use IndexedDB"},e.onsuccess=function(e){t.db=this.result,t.getFavorites(),t.my.view="sessions"},e.onupgradeneeded=function(e){e.currentTarget.result.createObjectStore("my")},t.my.sidebarVisible=!1,t.showMyVendors=!1},updated:function(){var t=this,e=indexedDB.open("WIGCApp",3);e.onerror=function(e){t.indexed="Can't use IndexedDB"},e.onsuccess=function(e){t.db=this.result,t.updateFavorites()},e.onupgradeneeded=function(e){e.currentTarget.result.createObjectStore("my")}},methods:{bindEvents:function(){console.log("Bind Events"),document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){this.deviceready=!0,console.log("Received Device Ready Event"),console.log("calling setup push"),app.setupPush()},setupPush:function(){console.log("calling push init");var e=PushNotification.init({android:{icon:"white",iconColor:"#f26c51",senderID:"285403687620"},browser:{},ios:{sound:!0,vibration:!0,badge:!0},windows:{}});console.log("after init"),e.on("registration",function(e){console.log("registration event: "+e.registrationId),console.log("Device Type: "+e.registrationType);var t="FCM"===e.registrationType?"android":"ios";firebase.database().ref(t).push().set({deviceID:e.registrationId}),localStorage.getItem("registrationId")!==e.registrationId&&localStorage.setItem("registrationId",e.registrationId)}),e.on("error",function(e){console.log("push error = "+e.message)}),e.on("notification",function(e){console.log("notification event"),navigator.notification.alert(e.message,null,e.title,"Ok")})},toggleFavorite:function(e,t){var n=this;t.favorite=!t.favorite,console.log(t.url),t.favorite?(e.push(t.url),console.log(t),trackEvent("Favorite",n.my.view,t.title)):(("My WIGC"===n.my.view||"Vendors"===n.my.view&&!0===n.showMyVendors)&&(n.unfavorited.push(t.url),setTimeout(function(){snap(n.unfavorited,t.url)},3e3)),snap(e,t.url))},switchSection:function(e,t){var n=this;n.search="",n.my.sidebarVisible=!1,"my-wigc"===n.my.view&&(n.unfavorited=[]),"map"==n.my.view&&onLoad(),"Vendors"===e&&void 0!==t&&(n.showMyVendors=!1),n.my.view=e,"social"==n.my.view&&(n.getInstagramFeed(),n.getTweets()),void 0!==t&&setTimeout(function(){$("#"+t).parent(".cards").animate({scrollTop:document.getElementById(t).offsetTop-50})},1e3),trackEvent("Screen",n.my.view)},mapClick:function(e){var t=e.street_address+" "+e.city+", "+e.state+" "+e.zip;window.open("https://maps.google.com?q="+t,"Map"),console.log(e)},showMeetoo:function(e){this.my.meetoo=e,this.switchSection("meetoo")},getFavorites:function(){var n=this;n.getObjectStore("my","readonly").openCursor().onsuccess=function(e){var t=e.target.result;t&&(n.my=t.value,n.error_msg?n.my.view="error":n.my.view="Home")}},updateFavorites:function(){var n=this,t=n.getObjectStore("my","readwrite");t.count().onsuccess=function(e){if(0===e.target.result)try{t.add(n.my,0)}catch(e){throw e}else t.openCursor().onsuccess=function(e){var t=e.target.result;if(t)try{t.update(n.my)}catch(e){throw e}n.sessions.map(function(e){-1!==n.my.sessions.indexOf(e.url)&&(e.favorite=!0)}),n.vendors.map(function(e){-1!==n.my.vendors.indexOf(e.url)&&(e.favorite=!0)})}}},getObjectStore:function(e,t){return this.db.transaction(e,t).objectStore(e)},isDisabled:function(e){return!e.favorite&&"schedule-item"!==e.type},getInstagramFeed:function(){var t=this;$.ajax({url:"https://circle.red/wigc/instagram.php?tag=mywigc",method:"GET",success:function(e){void 0!==e.entry_data.TagPage[0].graphql.hashtag.edge_hashtag_to_media.edges&&(t.instagramFeed=e.entry_data.TagPage[0].graphql.hashtag.edge_hashtag_to_media.edges),t.igLoading=!1},error:function(e){t.error_msg=e.responseText,t.my.view="error"}})},getTweets:function(){var t=this;$.ajax({url:"https://circle.red/wigc/twitter/twitter.php",method:"GET",success:function(e){t.tweets=e.statuses,t.tweetsLoading=!1},error:function(e){t.error_msg=e.responseText,t.my.view="error"}})},parseUserAgent:function(){var e=navigator.userAgent.toLowerCase();return device="",-1<e.indexOf("android")?device="Android":-1<e.indexOf("iphone")||-1<e.indexOf("ipad")||-1<e.indexOf("ipod")?device="iOS":-1<e.indexOf("windows")?device="Windows":-1<e.indexOf("mac os x")&&(device="OSX"),device},openLink:function(e,t){void 0===cordova?alert("yes 339"):alert("no 341")}}});
//# sourceMappingURL=wigc.min.js.map